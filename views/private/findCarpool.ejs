<%- include("../partials/header") -%>

<h1>Carpools to <%= destination %> from your location</h1>

<% if (carpools.length > 0) { %>
    <% for (let carpool of carpools) { %>
        <% if (carpool.passengers.includes(user.name) || carpool.driver[0]._id.equals(user._id)) { %>
            <div>
                <div>
                    <h3>Driver</h3>
                    <p><%= carpool.driver[0].name %></p>
                </div>
                <div>
                    <h3>Vehicle</h3>
                    <p><%= carpool.vehicle[0].color %> <%= carpool.vehicle[0].make %> <%= carpool.vehicle[0].model %></p>
                </div>
                <div>
                    <h3>Route</h3>
                    <p><%= carpool.start %> to <%= carpool.end %></p>
                </div>
                <div>
                    <h3>Date</h3>
                    <p><%= carpool.date.month %>/<%= carpool.date.day %>/<%= carpool.date.year %></p>
                </div>
                <div>
                    <h3>Available Seats</h3>
                    <p><%= carpool.vehicle.numSeats - carpool.passengers.length %></p>
                </div>
                <div>
                    <h3>Description</h3>
                    <p><%= carpool.description %></p>
                </div>
                <div>
                    <a class="btn btn-primary btn-lg w-100 my-2" href="/private/joinCarpool/<%= carpool._id %>">Join Carpool</a>
                </div>
            </div>
        <% } %>
    <% } %>
<% } %>